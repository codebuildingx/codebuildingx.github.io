import{b as R,c as O,d as Y,e as E,f as A,g as M,h as X,B as S,i as T}from"./app-e5954b7c.js";import{r as g,h as L,c as $,C as _,Y as ee,_ as te,o as ae,D as se,j as e,$ as C,x as le,p as ce,i as ne}from"./framework-f86f98ae.js";const oe="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";const W=()=>e(X,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));W.displayName="CloseIcon";const q=()=>e(X,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));q.displayName="HeadingIcon";const B=()=>e(X,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));B.displayName="HeartIcon";const Q=()=>e(X,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));Q.displayName="HistoryIcon";const Z=()=>e(X,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));Z.displayName="TitleIcon";const re={0:"分类：$content",1:"标签：$content"},ue=300,N=5,ie={"/":{cancel:"取消",placeholder:"搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},ve="search-pro-history-results",H=R(ve,[]),he=()=>({history:H,addHistory:a=>{H.value.length<N?H.value=[a,...H.value]:H.value=[a,...H.value.slice(0,N-1)]},removeHistory:a=>{H.value=[...H.value.slice(0,a),...H.value.slice(a+1)]}}),pe=g(oe),de=L(()=>JSON.parse(S(pe.value))),G=(a,v)=>{const h=a.toLowerCase(),s=v.toLowerCase(),n=[];let l=0,i=0;const p=(t,d=!1)=>{let c="";i===0?c=t.length>20?`… ${t.slice(-20)}`:t:d?c=t.length+i>100?`${t.slice(0,100-i)}… `:t:c=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,c&&n.push(c),i+=c.length,d||(n.push(["strong",v]),i+=v.length,i>=100&&n.push(" …"))};let y=h.indexOf(s,l);if(y===-1)return null;for(;y>=0;){const t=y+s.length;if(p(a.slice(l,y)),l=t,i>100)break;y=h.indexOf(s,l)}return i<100&&p(a.slice(l),!0),n},b=a=>a.reduce((v,{type:h})=>v+(h==="title"?50:h==="heading"?20:h==="custom"?10:1),0),ye=(a,v)=>{var h;const s={};for(const[n,l]of Object.entries(v)){const i=((h=v[n.replace(/\/[^\\]*$/,"")])==null?void 0:h.title)||"",p=`${i?`${i} > `:""}${l.title}`,y=G(l.title,a);y&&(s[p]=[...s[p]||[],{type:"title",path:n,display:y}]),l.customFields&&Object.entries(l.customFields).forEach(([t,d])=>{d.forEach(c=>{const o=G(c,a);o&&(s[p]=[...s[p]||[],{type:"custom",path:n,index:t,display:o}])})});for(const t of l.contents){const d=G(t.header,a);d&&(s[p]=[...s[p]||[],{type:"heading",path:n+(t.slug?`#${t.slug}`:""),display:d}]);for(const c of t.contents){const o=G(c,a);o&&(s[p]=[...s[p]||[],{type:"content",header:t.header,path:n+(t.slug?`#${t.slug}`:""),display:o}])}}}return Object.keys(s).sort((n,l)=>b(s[n])-b(s[l])).map(n=>({title:n,contents:s[n]}))},me=a=>{const v=O(),h=g([]),s=L(()=>de.value[v.value]),n=T(l=>{h.value=l?ye(l,s.value):[]},ue);return le([a,v],()=>{n(a.value)}),h};var ge=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:a=>!0},setup(a,{emit:v}){const h=_(),s=ee(),n=O(),l=Y(ie),{history:i,addHistory:p,removeHistory:y}=he(),t=te(a,"query"),d=me(t),c=g(0),o=g(0),J=g(),x=L(()=>d.value.length>0),P=L(()=>d.value[c.value]||null),I=()=>{c.value=c.value>0?c.value-1:d.value.length-1,o.value=P.value.contents.length-1},w=()=>{c.value=c.value<d.value.length-1?c.value+1:0,o.value=0},z=()=>{o.value<P.value.contents.length-1?o.value=o.value+1:w()},K=()=>{o.value>0?o.value=o.value-1:I()},D=r=>r.map(u=>ne(u)?u:e(u[0],u[1])),j=r=>{if(r.type==="custom"){const u=re[r.index]||"$content",[k,f=""]=ce(u)?u[n.value].split("$content"):u.split("$content");return D([k,...r.display,f])}return D(r.display)},U=()=>{c.value=0,o.value=0,v("updateQuery",""),v("close")};return ae(()=>{E("keydown",r=>{if(x.value){if(r.key==="ArrowUp")K();else if(r.key==="ArrowDown")z();else if(r.key==="Enter"){const u=P.value.contents[o.value];s.path!==u.path&&(p(u),h.push(u.path),U())}}}),A(J.value,{reserveScrollBarGap:!0})}),se(()=>{M()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?i.value.length===0:!x.value}],ref:J},t.value===""?i.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},l.value.history),i.value.map((r,u)=>e(C,{to:r.path,class:["search-pro-result-item",{active:o.value===u}],onClick:()=>{console.log("click"),U()}},()=>[e(Q,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[r.type==="content"&&r.header?e("div",{class:"content-header"},r.header):null,e("div",j(r))]),e("button",{class:"search-pro-close-icon",onClick:k=>{k.preventDefault(),k.stopPropagation(),y(u)}},e(W))]))])):l.value.emptyHistory:x.value?e("ul",{class:"search-pro-result-list"},d.value.map(({title:r,contents:u},k)=>{const f=c.value===k;return e("li",{class:["search-pro-result-list-item",{active:f}]},[e("div",{class:"search-pro-result-title"},r||"Documentation"),u.map((m,F)=>{const V=f&&o.value===F;return e(C,{to:m.path,class:["search-pro-result-item",{active:V,"aria-selected":V}],onClick:()=>{p(m),U()}},()=>[m.type==="content"?null:e(m.type==="title"?Z:m.type==="heading"?q:B,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[m.type==="content"&&m.header?e("div",{class:"content-header"},m.header):null,e("div",j(m))])])})])})):l.value.emptyResult)}});export{ge as default};
